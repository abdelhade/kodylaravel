# ๐ ุฏูุฌ ูุธุงู ุงูุทุงููุงุช ูู POS Barcode

## โ ูุง ุชู ุชูููุฐู:

### 1๏ธโฃ **ุฅูุดุงุก ุฌุฏูู ุงูุทุงููุงุช**
```sql
CREATE TABLE tables (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tname VARCHAR(255) NOT NULL,
    table_case INT NOT NULL DEFAULT 0,  -- 0 = ูุงุฑุบุฉุ 1 = ูุดุบููุฉ
    current_order_id INT DEFAULT NULL,
    crtime DATETIME DEFAULT CURRENT_TIMESTAMP,
    mdtime DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    isdeleted TINYINT(1) NOT NULL DEFAULT 0
)
```

### 2๏ธโฃ **ุฅุถุงูุฉ Modal ุงุฎุชูุงุฑ ุงูุทุงููุงุช**
- Modal ุฌููู ูุธูุฑ ุนูุฏ ุงุฎุชูุงุฑ "ุทุงููุฉ"
- ุงูุทุงููุงุช ุงููุงุฑุบุฉ ุจุงูููู **ุงูุฃุฎุถุฑ** โ
- ุงูุทุงููุงุช ุงููุดุบููุฉ ุจุงูููู **ุงูุฃุญูุฑ** โ
- ุญุฌู ูุจูุฑ ูุณูู ุงูููุฑ

### 3๏ธโฃ **AJAX ููุทุงููุงุช**
```javascript
// ุชุญููู ุงูุทุงููุงุช
loadTables()

// ุงุฎุชูุงุฑ ุทุงููุฉ
selectTable(tableId, tableName, tableCase)

// ุชุญููู ุทูุจ ุงูุทุงููุฉ
loadTableOrder(tableName, tableId)

// ูุณุญ ุงูุงุฎุชูุงุฑ
clearTableSelection()
```

### 4๏ธโฃ **ุงูุชูุงูู ุงูุชููุงุฆู**
- ุนูุฏ ุงุฎุชูุงุฑ "ุทุงููุฉ" โ ููุชุญ Modal ุงูุทุงููุงุช
- ุนูุฏ ุงุฎุชูุงุฑ ุทุงููุฉ ูุดุบููุฉ โ ูุณุฃู: ุชุญููู ุงูุทูุจุ
- ูุชู ุชุญููู ุงูุฃุตูุงู ูุงูุฅุฌูุงููุงุช ุชููุงุฆูุงู
- ูุคุดุฑ ุจุตุฑู ูุธูุฑ ุงุณู ุงูุทุงููุฉ ุงููุฎุชุงุฑุฉ

### 5๏ธโฃ **CSS ุฌููู**
```css
.table-available โ ุฃุฎุถุฑ (ูุงุฑุบุฉ)
.table-occupied โ ุฃุญูุฑ (ูุดุบููุฉ)
.table-selected-indicator โ ูุคุดุฑ ุฃุฒุฑู ุจุงูุทุงููุฉ ุงููุฎุชุงุฑุฉ
```

---

## ๐ฏ Best Practices ุงูููุทุจูุฉ:

### โ **1. UX ุณูุณ**
- Modal ููุชุญ ุชููุงุฆูุงู ุนูุฏ ุงุฎุชูุงุฑ "ุทุงููุฉ"
- ุฃููุงู ูุงุถุญุฉ (ุฃุฎุถุฑ/ุฃุญูุฑ)
- ุชุฃููุฏ ูุจู ุชุญููู ุทูุจ ููุฌูุฏ
- ูุคุดุฑ ุจุตุฑู ููุทุงููุฉ ุงููุฎุชุงุฑุฉ

### โ **2. AJAX ูุนูุงู**
- ุฌูุจ ุงูุทุงููุงุช ุจุฏูู ุชุญุฏูุซ
- ุชุญููู ุงูุทูุจ ุจุฏูู ุชุญุฏูุซ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

### โ **3. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**
```javascript
// ุญููู ูุฎููุฉ ูุชุชุจุน ุงูุญุงูุฉ
#selected_table_id   โ ูุนุฑู ุงูุทุงููุฉ
#current_order_id    โ ูุนุฑู ุงูุทูุจ ุงูุญุงูู
#table_name          โ ุงุณู ุงูุทุงููุฉ
```

### โ **4. ุงูุชุญูู ูู ุงูุจูุงูุงุช**
- ุงูุชุญูู ูู ูุฌูุฏ ุทูุจ ูุดุท
- ุงูุชุฃููุฏ ูุจู ุชุญููู ุทูุจ ููุฌูุฏ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### โ **5. ุงูุฃูุงู**
- ุงุณุชุฎุฏุงู Prepared Statements ูู AJAX
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- ุชูุธูู ุงููุฏุฎูุงุช

---

## ๐ ุณูุฑ ุงูุนูู (Workflow):

### ุงูุณููุงุฑูู 1: ุทูุจ ุฌุฏูุฏ ุนูู ุทุงููุฉ ูุงุฑุบุฉ
```
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "ุทุงููุฉ" โ
2. Modal ููุชุญ ููุนุฑุถ ุงูุทุงููุงุช
3. ูุฎุชุงุฑ ุทุงููุฉ ุฎุถุฑุงุก (ูุงุฑุบุฉ)
4. ูุถูู ุงูุฃุตูุงู
5. ูุญูุธ โ ุงูุทุงููุฉ ุชุชุญูู ููุฃุญูุฑ
```

### ุงูุณููุงุฑูู 2: ุชุญููู ุทูุจ ููุฌูุฏ
```
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "ุทุงููุฉ" โ
2. Modal ููุชุญ ููุนุฑุถ ุงูุทุงููุงุช
3. ูุฎุชุงุฑ ุทุงููุฉ ุญูุฑุงุก (ูุดุบููุฉ)
4. ุฑุณุงูุฉ: "ูู ุชุฑูุฏ ุชุญููู ุงูุทูุจุ"
5. ููุงูู โ ูุชู ุชุญููู ุงูุฃุตูุงู ูุงูุฅุฌูุงููุงุช
6. ูุนุฏู ููุญูุธ
```

### ุงูุณููุงุฑูู 3: ุงููุฏูู ูู ุตูุญุฉ tables.php
```
1. ูู tables.php ูููุฑ "ุทูุจ ุฌุฏูุฏ"
2. ููุชุญ pos_barcode.php?table=ุทุงููุฉ%201
3. ุชูุฎุชุงุฑ "ุทุงููุฉ" ุชููุงุฆูุงู
4. ูุชู ุชุญููู ุงูุทูุจ ุฅู ูุฌุฏ
5. ุฌุงูุฒ ููุนูู ูุจุงุดุฑุฉ
```

---

## ๐ ุงูุชูุงูู ูุน do/doadd_invoice.php

### ุฎุทูุฉ ุฅุถุงููุฉ (ุชุญุชุงุฌ ุชูููุฐ):

ูุฌุจ ุชุนุฏูู ููู `do/doadd_invoice.php` ููุญูุธ:
1. ูุนุฑู ุงูุทุงููุฉ ูู ุญูู `info` ุฃู `tatnet`
2. ุชุญุฏูุซ `table_case = 1` ุนูุฏ ุงูุญูุธ
3. ุฅุถุงูุฉ `current_order_id` ููุทุงููุฉ

**ูุซุงู:**
```php
// ูู doadd_invoice.php
$table_id = $_POST['table_id'] ?? null;
$table_name = $_POST['table'] ?? null;

if ($table_id) {
    // ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ
    $stmt = $conn->prepare("UPDATE tables SET table_case = 1, current_order_id = ? WHERE id = ?");
    $stmt->bind_param("ii", $order_id, $table_id);
    $stmt->execute();
}
```

---

## ๐จ ุงูุดูู ุงูููุงุฆู:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ุทุงููุฉ 5          [ููุน ุงูุทูุจ]       โ
โ                                          โ
โ  [ุชูู ุงูุงู] [ุทุงููุฉโ] [ุฏูููุฑู]         โ
โ                                          โ
โ  ุงูุชุงุฑูุฎ: [2025-10-16]                 โ
โ  ุงูุทุงููุฉ: ุทุงููุฉ 5                      โ
โ                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโ             โ
โ  โ  Modal ุงูุทุงููุงุช       โ             โ
โ  โ                        โ             โ
โ  โ  ๐ข ุทุงููุฉ 1  ๐ข ุทุงููุฉ 2 โ             โ
โ  โ  ๐ด ุทุงููุฉ 3  ๐ข ุทุงููุฉ 4 โ             โ
โ  โ  ๐ข ุทุงููุฉ 5  ๐ด ุทุงููุฉ 6 โ             โ
โ  โ                        โ             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ููุชุดุบูู:

1. ุงูุชุญ `pos_barcode.php`
2. ุงุฎุชุฑ "ุทุงููุฉ" ูู ููุน ุงูุทูุจ
3. ุณููุชุญ Modal ุงูุทุงููุงุช ุชููุงุฆูุงู
4. ุงุฎุชุฑ ุฃู ุทุงููุฉ
5. ุฃุถู ุงูุฃุตูุงู ูุงุญูุธ!

---

## ๐ ุงููููุงุช ุงูููุนุฏูุฉ:

- โ `pos_barcode.php` - ุฅุถุงูุฉ Modal ูุงูู CSS
- โ `js/pos.js` - ุฅุถุงูุฉ ูุธุงู ุงูุทุงููุงุช
- โ ุงุณุชุฎุฏุงู `ajax/get_tables.php` ุงูููุฌูุฏ
- โ ุงุณุชุฎุฏุงู `ajax/get_table_order.php` ุงูููุฌูุฏ

---

## ๐ฏ ุงููุชูุฌุฉ:

**ูุธุงู ูุชูุงูู ูุฑุจุท ุงูุทุงููุงุช ุจู POS ุจุทุฑููุฉ ุณูุณุฉ ูุณููุฉ!** โจ

- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ
- โ ุณุฑุนุฉ ูู ุงูุนูู
- โ ูุง ุฃุฎุทุงุก ูู ุงูุทูุจุงุช
- โ ุชุชุจุน ุฏููู ููุทุงููุงุช

