# ๐ ุชุญููู ุดุงูู ููุงุนุฏุฉ ุจูุงูุงุช ูุธุงู POS

## ๐ **ููุฎุต ุงูุชุญููู**

ุชู ุชุญููู ูุงุนุฏุฉ ุงูุจูุงูุงุช `hrmsnat` ูุชู ุงูุนุซูุฑ ุนูู **95 ุฌุฏูู** ููุฌูุฏ.

---

## โ **ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ุงูููุฌูุฏุฉ**

### **1. ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช (Accounting)**
```
โ acc_groups      - ูุฌููุนุงุช ุงูุญุณุงุจุงุช
โ acc_head        - ุฑุคูุณ ุงูุญุณุงุจุงุช (ุงูุนููุงุกุ ุงูููุฑุฏููุ ุงูุตูุงุฏููุ ุงููุฎุงุฒู)
โ journal_entries - ุงููููุฏ ุงูููููุฉ
โ journal_heads   - ุฑุคูุณ ุงููููุฏ
โ cost_centers    - ูุฑุงูุฒ ุงูุชูููุฉ
```

### **2. ุงูููุชุฌุงุช ูุงููุฎุฒูู (Products & Inventory)**
```
โ myitems         - ุงูุฃุตูุงู ุงูุฑุฆูุณูุฉ
  - id, iname, barcode, price1, price2, price3
  - group1, group2, group3 (ุงูุชุตูููุงุช)
  - itmqty (ุงููููุฉ ุงููุชููุฑุฉ)
  - cost_price, market_price
  - isdeleted, crtime, mdtime
  
โ item_group      - ุงูุชุตููู ุงูุฃูู
โ item_group2     - ุงูุชุตููู ุงูุซุงูู
โ item_group3     - ุงูุชุตููู ุงูุซุงูุซ
โ item_units      - ูุญุฏุงุช ุงูููุงุณ ููุฃุตูุงู
โ imgs            - ุตูุฑ ุงูุฃุตูุงู
  - id, iname (ุงุณู ุงูุตูุฑุฉ), itemid, clprofile
```

### **3. ุงููุจูุนุงุช ูุงูููุงุชูุฑ (Sales & Invoices)**
```
โ ot_head         - ุฑุฃุณ ุงููุงุชูุฑุฉ/ุงูุฃูุฑ
  - id, pro_id, pro_tybe, pro_date, accural_date
  - store_id, emp_id, acc1 (ุงูุนููู), acc2
  - fat_total, fat_disc, fat_tax, fat_plus
  - info (ููุงุญุธุงุช)
  
โ fat_details     - ุชูุงุตูู ุงููุงุชูุฑุฉ (ุงูุฃุตูุงู)
  - id, pro_id, item_id
  - qty_in, qty_out, price, cost_price
  - discount, det_value
  - **Triggers**: update_balance_trigger, update_after_update
  
โ fat_tybes       - ุฃููุงุน ุงูููุงุชูุฑ
โ pro_tybes       - ุฃููุงุน ุงูุนูููุงุช
```

### **4. ุงูููุธููู ูุงููุณุชุฎุฏููู (Users & Employees)**
```
โ users           - ุงููุณุชุฎุฏููู
โ employees       - ุงูููุธููู
โ mypowers        - ุงูุตูุงุญูุงุช
โ usr_pwrs        - ุตูุงุญูุงุช ุงููุณุชุฎุฏููู
```

### **5. ุงูุนููุงุก (Customers)**
```
โ clients         - ุงูุนููุงุก (ููุนูุงุฏุงุช/ุงูุตุงูููุงุช)
โ acc_head        - ุงูุญุณุงุจุงุช (ุชุญุชูู ุนูู ุงูุนููุงุก code like '122%')
```

### **6. ุงูุฅุนุฏุงุฏุงุช (Settings)**
```
โ settings        - ุฅุนุฏุงุฏุงุช ุงููุธุงู
โ myoptions       - ุฎูุงุฑุงุช ุงููุธุงู
```

---

## โ๏ธ **ุงูููุงุท ุงูุถุนููุฉ ูุงูููููุฏุฉ**

### **โ ุงููุดุงูู ุงูููุฌูุฏุฉ:**

1. **ุนุฏู ูุฌูุฏ Foreign Keys**
   - ูุง ุชูุฌุฏ ุนูุงูุงุช FK ุจูู ุงูุฌุฏุงูู
   - ูุคุฏู ูู orphaned records
   - ุตุนูุจุฉ ูู ุถูุงู ุณูุงูุฉ ุงูุจูุงูุงุช

2. **ุนุฏู ูุฌูุฏ Indexes ูุงููุฉ**
   - ูุง ุชูุฌุฏ indexes ุนูู ุงูุฃุนูุฏุฉ ุงููููุฉ:
     - `myitems.barcode`
     - `myitems.group1`
     - `ot_head.pro_date`
     - `fat_details.pro_id`
     - `fat_details.item_id`

3. **ุฃููุงุน ุงูุจูุงูุงุช ุบูุฑ ููุงุณุจุฉ**
   - `int(1)` ูู ูู ููุงู ุจุฏูุงู ูู INT/BIGINT
   - `decimal(3,0)` ูู acc_head (ูููู ุฌุฏุงู)
   - `double` ุจุฏูู precision ูุญุฏุฏุฉ

4. **ุชุณููุฉ ุบูุฑ ูุงุถุญุฉ**
   - `fat_details` ุจุฏูุงู ูู `invoice_items`
   - `ot_head` ุจุฏูุงู ูู `invoices`
   - `pro_tybe` ุจุฏูุงู ูู `transaction_type`

5. **ุนุฏู ูุฌูุฏ isdeleted ูู ุจุนุถ ุงูุฌุฏุงูู**
   - `fat_details` ููุณ ูู isdeleted
   - `journal_entries` ููุณ ูู isdeleted

### **โ ุงูุฌุฏุงูู ุงูููููุฏุฉ ููู POS:**

1. **tables** - ุฌุฏุงูู ุงููุทุงุนู/ุงููุงูููุงุช
2. **payment_methods** - ุทุฑู ุงูุฏูุน
3. **payments** - ุณุฌู ุงููุฏููุนุงุช ุงููุชุนุฏุฏุฉ
4. **offers** - ุงูุนุฑูุถ ูุงูุฎุตููุงุช
5. **stock_movements** - ุญุฑูุงุช ุงููุฎุฒูู ุงูุชูุตูููุฉ
6. **product_variants** - ุฃุดูุงู ุงูููุชุฌ (ููุงุณุงุชุ ุฃููุงู)
7. **audit_logs** - ุณุฌู ุงูุชุฏููู
8. **cash_register** - ุณุฌู ุงูุตูุงุฏูู ุงููููู
9. **shift_sessions** - ุฌูุณุงุช ุงูุนูู (ูุชุญ/ุฅุบูุงู)
10. **return_invoices** - ููุงุชูุฑ ุงููุฑุชุฌุนุงุช

---

## ๐ **ุงูุฌุฏุงูู ุงููุทููุจุฉ (ุชู ุฅูุดุงุคูุง ุจุงููุนู)**

ูู ุฎูุงู ุงูููุฏุ ุชู ุฅูุดุงุก:
```sql
โ tables - ุฅุฏุงุฑุฉ ุงูุทุงููุงุช (ุชู ุฅูุดุงุคู ูู pos_barcode.php ู tables.php)
```

---

## ๐ฏ **ุงูุชูุตูุงุช ูุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ**

### **A. ุชุญุณููุงุช ุนุงุฌูุฉ (High Priority)**

1. โ **ุฅุถุงูุฉ Indexes**
2. โ **ุชุญุณูู ุฃููุงุน ุงูุจูุงูุงุช**
3. โ **ุฅุถุงูุฉ ุงูุฌุฏุงูู ุงูููููุฏุฉ**
4. โ **ุฅุถุงูุฉ isdeleted ููุฌุฏุงูู ุงููุงูุตุฉ**

### **B. ุชุญุณููุงุช ูุชูุณุทุฉ (Medium Priority)**

5. โ๏ธ **ุฅุถุงูุฉ Foreign Keys** (ุจุญุฐุฑ - ูุฏ ุชูุดู ูุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ)
6. โ๏ธ **Normalization** ูุจุนุถ ุงูุฌุฏุงูู
7. โ๏ธ **Views** ููุชูุงุฑูุฑ ุงููุชูุฑุฑุฉ

### **C. ุชุญุณููุงุช ุทูููุฉ ุงููุฏู (Low Priority)**

8. ๐ **Migration ุฅูู ุฃุณูุงุก ุฌุฏุงูู ุฃูุถุญ**
9. ๐ **ุชุทุจูู naming conventions ููุญุฏุฉ**
10. ๐ **Partitioning ููุฌุฏุงูู ุงููุจูุฑุฉ**

---

## ๐ฆ **ูููุงุช Migration ุงูููุชุฑุญุฉ**

ุชู ุฅูุดุงุก ุงููููุงุช ุงูุชุงููุฉ:
1. `migrations/001_add_indexes.sql` - ุฅุถุงูุฉ Indexes
2. `migrations/002_add_missing_tables.sql` - ุงูุฌุฏุงูู ุงูููููุฏุฉ
3. `migrations/003_add_isdeleted_columns.sql` - ุฅุถุงูุฉ isdeleted
4. `migrations/004_improve_datatypes.sql` - ุชุญุณูู ุฃููุงุน ุงูุจูุงูุงุช
5. `migrations/005_add_foreign_keys.sql` - ุฅุถุงูุฉ FK (ุงุฎุชูุงุฑู)

---

## ๐ **ุงูุนูุงูุงุช ุงูุญุงููุฉ (ุจุฏูู FK)**

```
myitems (1) โโ (N) imgs
  โโ itemid

myitems (1) โโ (N) fat_details
  โโ item_id

ot_head (1) โโ (N) fat_details
  โโ pro_id

item_group (1) โโ (N) myitems
  โโ group1

acc_head (customers) (1) โโ (N) ot_head
  โโ acc1

acc_head (funds) (1) โโ (N) ot_head
  โโ acc2
```

---

## โก **ููุงุญุธุงุช ูููุฉ**

1. **ุงููุธุงู ูุณุชุฎุฏู Soft Delete** (`isdeleted = 0/1`)
2. **ุงููุธุงู ูุญุงุณุจู ูุชูุงูู** (ูุฏุนู ุงูุฃุตููุ ุงูุฎุตููุ ุงููููุฏ)
3. **Triggers ููุฌูุฏุฉ** ูุชุญุฏูุซ ุงููุฎุฒูู ุชููุงุฆูุงู
4. **ุฃุณูุงุก ุงูุฃุนูุฏุฉ ุนุฑุจูุฉ** ูู ุจุนุถ ุงูุฃูุงูู

---

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ**

1. โ ูุฑุงุฌุนุฉ ูููุงุช Migration
2. โ ุชูููุฐ ุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ
3. โ ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
4. โ Backup ูุจู ุฃู ุชุนุฏูู

---

**ุชุงุฑูุฎ ุงูุชุญููู:** 2025-10-17
**ุงููุญูู:** AI Database Architect
**ูุงุนุฏุฉ ุงูุจูุงูุงุช:** hrmsnat
**ุนุฏุฏ ุงูุฌุฏุงูู:** 95

